<!DOCTYPE html>
<html>
<style>
body {
    margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background-color:#F8EACA;
}

input[type=text], select {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: block;
  border: 1px solid #F8EACA;
  border-radius: 4px;
  box-sizing: border-box;
}

input[type=submit] {
  width: 100%;
  background-color: burlywood;
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

input[type=submit]:hover {
  background-color: lightgray;
}

div.container {
  border-radius: 5px;
  background-color: #F8EACA;
  padding: 20px;
}
.topnav {
      overflow: hidden;
      background-color: #F8EACA;
    }
    
    .topnav a {
      float: left;
      color: orange;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
      font-size: 17px;
      font-weight: bold;
    }
    
    .topnav a:hover {
      background-color: #ddd;
      color: black;
    }
    
    /* Create a right-aligned (split) link inside the navigation bar */
    .topnav a.split {
      float: right;
      color: black;
      font-weight: bold;
    }
    .btn {
    border: 2px solid black;
    background-color: white;
    color: black;
    padding: 14px 28px;
    font-size: 16px;
    cursor: pointer;
    }
    .add {
    border-color: burlywood;
    color: black;
    }

    .add:hover {
    background-color: burlywood;
    color: white;
    }

</style>
<body>

    <div class="topnav">
        <div class="buttons">
          <a class="active" href="index.html">Guitar Inventory Managment</a>
          <a href="add.html"class="split">Add</a>
          <a href="search.html" class="split">Search</a>
          <a href="about.html"class="split">About</a>
        </div>
    </div>

<div class="container">
    <form id="addForm"></form>
    <label for="fname">Serial Number</label>
    <input type="text" id="serialNumber" name="serial">

    <label for="lname">Price</label>
    <input type="text" id="Price" name="price">

    <label for="builder">Builder</label>
    <input type="text" id="builder" name="builder">

    <label for="Model">Model</label>
    <input type="text" id="Model" name="Model">

    <label for="Type">Type</label>
    <input type="text" id="Type" name="Type">

    <label for="BackWood">Back wood</label>
    <input type="text" id="BackWood" name="BackWood">

    <label for="TopWood">Top wood</label>
    <input type="text" id="TopWood" name="TopWood">
    
    <button type="button" class="btn add" onclick="displayFormData()">Add the Guitar</button>
  </form>
</div>

<script>
    function displayFormData() {
    // Get form elements by their IDs
    let serialNumber = document.getElementById("serialNumber").value;
    let price = document.getElementById("Price").value;
    let builder = document.getElementById("builder").value;
    let model = document.getElementById("Model").value;
    let type = document.getElementById("Type").value;
    let backWood = document.getElementById("BackWood").value;
    let topWood = document.getElementById("TopWood").value;

    // Check if any field is empty
    if (!serialNumber || !price || !builder || !model || !type || !backWood || !topWood) {
        alert('Please enter a value for all fields.');
        return;
    }

    // Create a JavaScript object with the form data
    let guitarData = {
        "serialNumber": serialNumber,
        "price": parseFloat(price),
        "builder": builder,
        "model": model,
        "type": type,
        "backWood": backWood,
        "topWood": topWood
    };

    // Send data to the backend API
    fetch('http://localhost:8081/inventory/add', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(guitarData),
    })
    .then(response => {
    if (response.status === 204) {
        // No content in the response (HTTP 204 No Content)
        alert("The guitar was added to the system.");
    } else {
        return response.json(); // Attempt to parse JSON for other cases
    }
})
.then(data => {
    if (data) {
        alert("The guitar was added to the system.");
    } else {
        alert("Empty or invalid response received.");
    }
})
.catch(error => {
    alert("Something went wrong. Please try again or contact the customer support team.");
    console.error('Error:', error);
});
}
    </script>

</body>
</html>